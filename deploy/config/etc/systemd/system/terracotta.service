[Unit]
Description=Gunicorn instance to serve Terracotta
After=network.target

[Service]
Type=simple
User=ubuntu
Group=ubuntu
WorkingDirectory=/var/www/tileserver/raster
Environment="TC_DRIVER_PATH=/var/www/tileserver/raster/terracotta.sqlite"
Environment="TC_RESAMPLING_METHOD=nearest"
Environment="TC_REPROJECTION_METHOD=nearest"
Environment="TC_PNG_COMPRESS_LEVEL=1"
ExecStart=gunicorn \
            --workers 3 \
            --bind unix:terracotta.sock \
            -m 007 \
            terracotta.server.app:app
Restart=on-failure

[Install]
WantedBy=multi-user.target
